<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* General Page Styling */
body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
}

/* Container for Authentication Forms */
.auth-container {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
    width: 300px;
    margin-bottom: 20px;
}

/* Headings */
h2 {
    margin-bottom: 15px;
    color: #333;
}

/* Input Fields */
input {
    width: 90%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
}

/* Buttons */
button {
    background-color: #007bff;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    width: 100%;
    margin-top: 10px;
}

button:hover {
    background-color: #0056b3;
}

/* User Information Display */
#information {
    background: #e9ecef;
    padding: 10px;
    border-radius: 5px;
    margin-top: 10px;
}

/* Responsive Design */
@media (max-width: 400px) {
    .auth-container {
        width: 90%;
    }
}

    </style>
</head>
<body>

    <body>

        <div class="auth-container">
            <h2>Signup</h2>
            <input type="text" id="signup-username" name="username" placeholder="Username">
            <input type="password" id="signup-password" name="password" placeholder="Password">
            <button onclick="signup()">Sign Up</button>
        </div>
    
        <div class="auth-container">
            <h2>Signin</h2>
            <input type="text" id="signin-username" name="username" placeholder="Username">
            <input type="password" id="signin-password" name="password" placeholder="Password">
            <button onclick="signin()">Sign In</button>
        </div>
    
        <div class="auth-container">
            <h2>User Info</h2>
            <div id="information">User details will appear here.</div>
            <button onclick="getUserInformation()">Get User Info</button>
        </div>
    
        <div class="auth-container">
            <button onclick="logout()">Logout</button>
        </div>
    
    </body>
    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js"></script>

    <script>
        async function signup(){
            const username = document.getElementById("signup-username").value;
            const password= document.getElementById("signup-password").value;
            
            const response = await axios.post("https://auth-project-mtnb.onrender.com/signup",{
                username: username,
                password: password
            })
            alert("Signed up succesfully");
 
        }

        async function signin(){
            const username = document.getElementById("signin-username").value;
            const password= document.getElementById("signin-password").value;
            
            const response = await axios.post("https://auth-project-mtnb.onrender.com/signin",{
                username: username,
                password: password
            })
            localStorage.setItem("token", response.data.token);            
            
            alert("Signed in succesfully");
            
        }

        async function getUserInformation(){
            const token = localStorage.getItem("token");
            if(token){
                const response = await axios.get("https://auth-project-mtnb.onrender.com/me", {
                    headers:{
                        "Authorization": `Bearer ${token}`
                    }
                })
                document.getElementById("information").innerHTML = response.data.username;
                alert(response.data.username);
            }
        }


        async function logout(){
            localStorage.removeItem("token");
        }


    </script>
    
</body>
</html>
